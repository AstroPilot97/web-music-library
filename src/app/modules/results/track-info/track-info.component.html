<div class="wrapper">
  <div class="bg-image" *ngIf="trackInfo.song_art_image_url" style="background-image: url({{trackInfo.song_art_image_url}});"></div>
  <div class="track-container">
    <div class="top-subcontainer">
      <div class="track-banner">
        <img *ngIf="trackInfo.song_art_image_url" [src]="trackInfo.song_art_image_url">
      </div>
      <div class="track-name">
        <h1>{{trackInfo.full_title}}</h1>
      </div>
    </div>
    <div class="bottom-subcontainer">
      <div class="row">
        <div class="column left">
          <div class="track-miscalleanous">
            <h1>{{trackInfo.title}} info</h1>
            <hr>
            <div class="track-writers">
              <span>Written by:
                <ul *ngFor="let writer of trackInfo.writer_artists">
                  <li>{{writer.name}}</li>
                </ul>
              </span>
              <hr>
            </div>
            <div class="track-release-date">
              <p>Release date: {{trackInfo.release_date_for_display}}</p>
              <hr>
            </div>
            <div class="track-recording-location">
              <ng-container *ngIf="trackInfo.recording_location; else elseTemplate">
                <p>Recorded at: {{trackInfo.recording_location}}</p>
              </ng-container>
              <ng-template #elseTemplate>
                <p>No info about recording location</p>
              </ng-template>
            </div>
          </div>
          <div class="track-lyrics">
            <h2>Track lyrics</h2>
            <p *ngIf="lyricsInfo">{{lyricsInfo.track.text}}</p>
            <small *ngIf="lyricsInfo">{{lyricsInfo.copyright.notice}}</small>
            <p *ngIf="!lyricsInfo">Sorry, lyrics haven't been provided for this track.</p>
          </div>
          <div class="track-album">
            <h2>Check out the album</h2>
            <div class="album">
              <img [src]="spotifyTrack.album.images[1].url" (click)="loading.startLoading()" routerLink="/results/album/{{spotifyTrack.album.id}}">
              <h3>{{spotifyTrack.album.name}}</h3>
            </div>
          </div>
          <div class="track-analysis">
            <h2>Track features</h2>
            <p>Track length: {{trackTime}}</p>
            <p>Track tempo: {{trackFeatures.tempo | number: '1.0-0'}} BPM (Beats per minute)</p>
          </div>
        </div>
        <div class="column right">
          <div class="track-media">
            <h1>Track preview</h1>
            <div class="music-preview" *ngIf="spotifyTrack.preview_url">
              <img class="album-cover" [src]="spotifyTrack.album.images[1].url">
              <h2 class="track-name">{{trackInfo.primary_artist.name}} - {{trackInfo.title}}</h2>
              <audio class="player" controls loop preload="auto" [src]="spotifyTrack.preview_url | safe" type="audio/mp3">
              </audio>
            </div>
            <div class="music-video" *ngFor="let media of trackInfo.media">
              <ng-container *ngIf="media.type === 'video'">
                <youtube-player [videoId]="videoId"></youtube-player>
              </ng-container>
            </div>
          </div>
          <div class="track-description">
            <h1>Track description</h1>
            <p *ngIf="trackInfo.description.plain !== '?'">{{trackInfo.description.plain}}</p>
            <p *ngIf="trackInfo.description.plain === '?'">No track description has been provided yet.</p>
          </div>
          <div class="track-artist">
            <h1>Track artist</h1>
            <div class="artist">
              <img class="artist-image" *ngIf="trackInfo.primary_artist.image_url" [src]="trackInfo.primary_artist.image_url"
              height="200" width="200" (click)="loading.isloading = true" routerLink="/results/artist/{{spotifyTrack.artists[0].id}}">
              <h3>{{trackInfo.primary_artist.name}}</h3>
            </div>
          </div>
          <div class="track-producers">
            <h1>Track producers</h1>
            <div class="producer" *ngFor="let producer of trackInfo.producer_artists">
              <img class="producer-image" *ngIf="producer.image_url" [src]="producer.image_url" height="200" width="200">
              <h3>{{producer.name}}</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ngx-loading [show]="loading.isLoading"></ngx-loading>
